<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>下拉刷新</title>
<style>
  *{margin:0 auto;padding:0;}
  #mainContent{width:200px;height:300px;border:1px solid #ccc;margin-top:20px;overflow:scroll;/*溢出部分隐藏*/}
  #myContent{width:100%;}
  li{list-style:none;text-align:center;}
  #showhidden{width:100%;height:20px;background:#3cf;}
  
</style>
</head>

<body>
  <div id="mainContent">
     <div id="myContent">
        <ul>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>  
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li> 
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>   
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>
           <li>item1-item-1-itemt2</li>            
        </ul>
     </div>
     <div id="showhidden" style="display:none">
        <p>加载中，请稍后...........</p>
     </div>
  </div>
  
  <script type="text/javascript">
     var obj=document.getElementById("mainContent");
	 obj.onscroll=function(){        //添加一个滚动条函数
	     //alert("触发了滚动事件");
		 var scrollH=obj.scrollHeight;        //scrollHeight:指整个内容的高度，包括内容区域的高度，加上被"卷"起的内容(部分)
		 var scrollT=obj.scrollTop;        //scrollTop:被卷起来的高度   ->  滚动到哪里来了
		 var clientH=obj.clientHeight;    //内容区域的高度
		// console.log("scrollHeight:"+scrollH+"-----scrollTop"+scrollT+"-----clientHeight"+clientH);           //scrollHeight=scrollTop+clientHeight;
		if(scrollH==scrollT+clientH){        //如果scrollH=scrollT+clientH，就说明已经加载完所有的内容了。
	         //alert("已经到了底部");
			 var sh=document.getElementById("showhidden");   //获取showhidden的ID
			 sh.style.display="block";     //到了底部，就显示出来
			 window.setTimeout("frush()",1000);     //setTimeout():时间的延迟
		 }
	  }
	  
	  //加载新的下拉列表
	  function frush(){
	      var newdiv=document.createElement("div");     //创建一个新的div
		  var newul=document.createElement("ul");      //创建一个新的ul
		  //循环添加内容
		  for(var i=0;i<16;i++){
		    var newli=document.createElement("li");    //创建一个新的li
			newli.innerHTML="scroll-scro-1-scro1";    //添加html内容
			newul.appendChild(newli);          //appendChild():表示添加到（增加元素使用appendChild）
		  }
		  newdiv.appendChild(newul);       //说明新的ul创建在新的div下
		  var sh=document.getElementById("showhidden");
		  obj.insertBefore(newdiv,sh);           //在sh这个div之前插入
	}
  </script>
</body>
</html>
